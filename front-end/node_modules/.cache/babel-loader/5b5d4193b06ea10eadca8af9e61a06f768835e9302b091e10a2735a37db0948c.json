{"ast":null,"code":"import _slicedToArray from\"E:/Project/AssignmentSubmisssionApp/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Navigate}from'react-router-dom';import ajax from'../Services/fetchService';import{useUser}from'../UserProvider';import{jsx as _jsx}from\"react/jsx-runtime\";var PrivateRoute=function PrivateRoute(_ref){var children=_ref.children;var user=useUser();//  const [jwt,setJwt] = useLocalState(\"\", \"jwt\")\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];if(user){ajax(\"/api/auth/validate?token=\".concat(user.jwt),\"GET\",user.jwt).then(function(isValid){setIsValid(isValid);setIsLoading(false);});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return isLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):isValid===true?children:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};export default PrivateRoute;","map":{"version":3,"names":["React","useContext","useState","Navigate","ajax","useUser","jsx","_jsx","PrivateRoute","_ref","children","user","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","isValid","setIsValid","concat","jwt","then","to"],"sources":["E:/Project/AssignmentSubmisssionApp/front-end/src/PrivateRoute/index.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport ajax from '../Services/fetchService';\r\nimport { useUser } from '../UserProvider';\r\n\r\nconst PrivateRoute = ({children}) => {\r\n    const user = useUser();\r\n  //  const [jwt,setJwt] = useLocalState(\"\", \"jwt\")\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isValid,setIsValid] = useState(null);\r\n\r\n    if(user){\r\n        ajax(`/api/auth/validate?token=${user.jwt}`,\"GET\",user.jwt)\r\n        .then((isValid) =>{\r\n           setIsValid(isValid);\r\n           setIsLoading(false);\r\n            \r\n        }); \r\n        \r\n    }else{\r\n       return  <Navigate to=\"/login\"/>\r\n    }\r\n\r\n    return isLoading ? ( <div>Loading...</div>) : \r\n    isValid === true ? ( children ) :\r\n    (<Navigate to=\"/login\"/>);\r\n     \r\n};\r\n\r\nexport default PrivateRoute;"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,MAAO,CAAAC,IAAI,KAAM,0BAA0B,CAC3C,OAASC,OAAO,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1C,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAmB,IAAd,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC3B,GAAM,CAAAC,IAAI,CAAGN,OAAO,CAAC,CAAC,CACxB;AACE,IAAAO,SAAA,CAAkCV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA6Bf,QAAQ,CAAC,IAAI,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAApCE,OAAO,CAAAD,UAAA,IAACE,UAAU,CAAAF,UAAA,IAEzB,GAAGP,IAAI,CAAC,CACJP,IAAI,6BAAAiB,MAAA,CAA6BV,IAAI,CAACW,GAAG,EAAG,KAAK,CAACX,IAAI,CAACW,GAAG,CAAC,CAC1DC,IAAI,CAAC,SAACJ,OAAO,CAAI,CACfC,UAAU,CAACD,OAAO,CAAC,CACnBH,YAAY,CAAC,KAAK,CAAC,CAEtB,CAAC,CAAC,CAEN,CAAC,IAAI,CACF,mBAAQT,IAAA,CAACJ,QAAQ,EAACqB,EAAE,CAAC,QAAQ,CAAC,CAAC,CAClC,CAEA,MAAO,CAAAT,SAAS,cAAKR,IAAA,QAAAG,QAAA,CAAK,YAAU,CAAK,CAAC,CAC1CS,OAAO,GAAK,IAAI,CAAKT,QAAQ,cAC5BH,IAAA,CAACJ,QAAQ,EAACqB,EAAE,CAAC,QAAQ,CAAC,CAAE,CAE7B,CAAC,CAED,cAAe,CAAAhB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}