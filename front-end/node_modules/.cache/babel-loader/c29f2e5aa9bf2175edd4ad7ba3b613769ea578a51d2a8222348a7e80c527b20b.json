{"ast":null,"code":"import _slicedToArray from\"E:/Project/AssignmentSubmisssionApp/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Button,Col,Container,Row}from\"react-bootstrap\";import{Form}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useUser}from\"../UserProvider\";import NavBar from\"../NavBar\";import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var user=useUser();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();useEffect(function(){if(user.jwt)navigate(\"/dashboard\");},[user]);function sendLoginRequest(){var reqBody={username:username,password:password};fetch(\"api/auth/login\",{headers:{\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify(reqBody)// Sending the request body as JSON\n}).then(function(response){if(response.status===200)return Promise.all([response.json(),response.headers]);else return Promise.reject(\"Invalid login attempt\");}).then(function(_ref){var _ref2=_slicedToArray(_ref,2),body=_ref2[0],headers=_ref2[1];user.setJwt(headers.get(\"authorization\"));toast.success(\"Login successful!\");}).catch(function(message){toast.error(\"Invalid login attempt. Please check your credentials.\",{position:toast.POSITION.TOP_CENTER,theme:\"dark\"});});}// The empty array means this effect runs only once when the component mounts\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center mt-5\",children:/*#__PURE__*/_jsx(Col,{md:\"8\",lg:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fs-4\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",size:\"lg\",placeholder:\"joe@gmail.com\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:\"8\",lg:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fs-4\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",size:\"lg\",placeholder:\"Type in your password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{md:\"8\",lg:\"6\",className:\"mt-2 d-flex flex-column gap-5 flex-md-row justify-content-md-between\",children:[/*#__PURE__*/_jsx(Button,{id:\"submit\",type:\"button\",size:\"lg\",onClick:function onClick(){return sendLoginRequest();},children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",size:\"lg\",onClick:function onClick(){navigate(\"/\");},children:\"Exit\"})]})})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","Button","Col","Container","Row","Form","useNavigate","useUser","NavBar","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","user","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","navigate","jwt","sendLoginRequest","reqBody","fetch","headers","method","body","JSON","stringify","then","response","status","Promise","all","json","reject","_ref","_ref2","setJwt","get","success","catch","message","error","position","POSITION","TOP_CENTER","theme","children","className","md","lg","Group","controlId","Label","Control","type","size","placeholder","value","onChange","e","target","id","onClick","variant"],"sources":["E:/Project/AssignmentSubmisssionApp/front-end/src/Login/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUser } from \"../UserProvider\";\r\nimport NavBar from \"../NavBar\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nconst Login = () => {\r\n  const user = useUser();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (user.jwt) navigate(\"/dashboard\");\r\n  }, [user]);\r\n\r\n  function sendLoginRequest() {\r\n    const reqBody = {\r\n      username: username,\r\n      password: password,\r\n    };\r\n\r\n    fetch(\"api/auth/login\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify(reqBody), // Sending the request body as JSON\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 200)\r\n          return Promise.all([response.json(), response.headers]);\r\n        else return Promise.reject(\"Invalid login attempt\");\r\n      })\r\n\r\n      .then(([body, headers]) => {\r\n        user.setJwt(headers.get(\"authorization\"));\r\n        toast.success(\"Login successful!\");\r\n      })\r\n      .catch((message) => {\r\n        toast.error(\"Invalid login attempt. Please check your credentials.\" ,{position: toast.POSITION.TOP_CENTER ,theme: \"dark\"});\r\n        \r\n      });\r\n  }\r\n  // The empty array means this effect runs only once when the component mounts\r\n\r\n  return (\r\n    <>\r\n    <NavBar />\r\n      <Container>\r\n      <ToastContainer />\r\n        <Row className=\"justify-content-center mt-5\">\r\n          <Col md=\"8\" lg=\"6\">\r\n            <Form.Group className=\"mb-3\" controlId=\"username\">\r\n              <Form.Label className=\"fs-4\">Username</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                size=\"lg\"\r\n                placeholder=\"joe@gmail.com\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"justify-content-center\">\r\n          <Col md=\"8\" lg=\"6\">\r\n            <Form.Group className=\"mb-3\" controlId=\"password\">\r\n              <Form.Label className=\"fs-4\">Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                size=\"lg\"\r\n                placeholder=\"Type in your password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"justify-content-center\">\r\n          <Col\r\n            md=\"8\"\r\n            lg=\"6\"\r\n            className=\"mt-2 d-flex flex-column gap-5 flex-md-row justify-content-md-between\"\r\n          >\r\n            <Button\r\n              id=\"submit\"\r\n              type=\"button\"\r\n              size=\"lg\"\r\n              onClick={() => sendLoginRequest()}\r\n            >\r\n              Login\r\n            </Button>\r\n            <Button\r\n              variant=\"secondary\"\r\n              type=\"button\"\r\n              size=\"lg\"\r\n              onClick={() => {\r\n                navigate(\"/\");\r\n              }}\r\n            >\r\n              Exit\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}